<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus Timer Stats</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 min-h-screen text-white">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-6 text-center">Focus Timer Stats & Charts</h1>
        <div id="stats-list" class="space-y-6 max-w-xl mx-auto">
            <!-- Stats will appear here -->
        </div>
        <a href="index.html" class="block mt-8 text-center text-green-400 hover:underline">Back to Timer</a>
    </div>
    <script>
    // Load stats from localStorage
    const stats = JSON.parse(localStorage.getItem('focusTimerStats') || '{}');
    function getLevel(seconds) {
        const hours = seconds / 3600;
        if (hours >= 1000) return 99;
        return Math.min(99, Math.floor(hours / (1000/98)) + 1);
    }
    function getRank(level) {
        if (level <= 10) return 'Noob';
        if (level <= 20) return 'Beginner';
        if (level <= 40) return 'Intermediate';
        if (level <= 60) return 'Advanced';
        if (level <= 80) return 'Expert';
        return 'Master';
    }
    function getProgressBar(seconds) {
        const percent = Math.min(100, (seconds / (1000*3600)) * 100);
        return `<div class='w-full bg-gray-700 rounded-full h-4'><div class='bg-green-400 h-4 rounded-full' style='width:${percent}%;'></div></div>`;
    }
    function formatTime(seconds) {
        const h = Math.floor(seconds / 3600);
        const m = Math.floor((seconds % 3600) / 60);
        const s = seconds % 60;
        return `${h}h ${m}m ${s}s`;
    }
    const statsList = document.getElementById('stats-list');
    Object.keys(stats).forEach(taskId => {
        const task = stats[taskId];
        const level = getLevel(task.seconds);
        const rank = getRank(level);
        statsList.innerHTML += `
            <div class='bg-gray-800 rounded-lg shadow p-6 mb-4'>
                <div class='flex justify-between items-center mb-2'>
                    <span class='text-lg font-semibold'>${task.name}</span>
                    <span class='text-green-400 font-bold'>Level ${level} (${rank})</span>
                </div>
                <div class='mb-2'>${getProgressBar(task.seconds)}</div>
                <div class='text-sm text-gray-300'>Total Time: ${formatTime(task.seconds)}</div>
            </div>
        `;
    });
    </script>
</body>
</html>
